<!doctype html>
<html lang="tr" data-bs-theme="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}App{% endblock %}</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons (opsiyonel) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
      :root{
        --glass-bg: rgba(255,255,255,0.08);
        --glass-border: rgba(255,255,255,0.18);
        --glass-shadow: 0 10px 30px rgba(0,0,0,0.25);
      }
      @media (prefers-color-scheme: light){
        :root{
          --glass-bg: rgba(255,255,255,0.55);
          --glass-border: rgba(255,255,255,0.35);
          --glass-shadow: 0 10px 30px rgba(31,38,135,0.2);
        }
      }

      html, body { height: 100%; }
      body{
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
        background:
          radial-gradient(1200px 800px at 10% -10%, #6a9cff33, transparent 60%),
          radial-gradient(1000px 700px at 100% 0%, #9a6bff33, transparent 55%),
          linear-gradient(180deg, #0b1020 0%, #0f1224 60%, #0b1020 100%);
        background-attachment: fixed;
      }

      /* Glass utilities */
      .glass{
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        backdrop-filter: blur(14px) saturate(130%);
        -webkit-backdrop-filter: blur(14px) saturate(130%);
        box-shadow: var(--glass-shadow);
      }
      .rounded-3xl{ border-radius: 1.25rem; }

      /* Navbar */
      .navbar-glass{
        background: var(--glass-bg);
        border-bottom: 1px solid var(--glass-border);
        backdrop-filter: blur(14px) saturate(130%);
        -webkit-backdrop-filter: blur(14px) saturate(130%);
      }
      .nav-logo{
        font-weight: 700;
        letter-spacing: .3px;
      }

      /* Container width */
      .app-container{ max-width: 1040px; }

      /* Buttons */
      .btn-primary{
        --bs-btn-bg:#6a7bff;
        --bs-btn-border-color:#6a7bff;
        --bs-btn-hover-bg:#5968e6;
        --bs-btn-hover-border-color:#5968e6;
        --bs-btn-focus-shadow-rgb:106,123,255;
      }
      .btn-outline-primary{
        --bs-btn-color:#8ea0ff;
        --bs-btn-border-color:#8ea0ff33;
        --bs-btn-hover-bg:#8ea0ff1a;
        --bs-btn-hover-border-color:#8ea0ff80;
      }

      /* Cards */
      .card.glass{ border-radius: 1rem; }

      /* Footer space */
      main{ padding-top: 1.25rem; padding-bottom: 2.5rem; }

      /* Toasts (flash) */
      .toast-container{
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1080;
      }

      /* Forms */
      .form-control, .form-select{
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.18);
        color: #e7e9ee;
      }
      .form-control:focus, .form-select:focus{
        background: rgba(255,255,255,0.10);
        border-color: #6a7bff;
        box-shadow: 0 0 0 .2rem rgba(106,123,255,.25);
        color: #fff;
      }
      .form-label{ color: #cfd3df; }

      /* Links */
      a{ text-decoration: none; }
      a:hover{ text-decoration: underline; }
    </style>

    {% block head %}{% endblock %}
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-glass sticky-top">
      <div class="container app-container">
        <a class="navbar-brand nav-logo d-flex align-items-center gap-2" href="{{ url_for('home') }}">
          <i class="bi bi-shield-lock"></i> App
        </a>

        <button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div id="navMain" class="collapse navbar-collapse">
          <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
            {% if current_user.is_authenticated %}
              <li class="nav-item my-2 my-lg-0">
                <a class="btn btn-outline-light" href="{{ url_for('logout') }}">
                  <i class="bi bi-box-arrow-right me-1"></i> Çıkış
                </a>
              </li>
            {% else %}
              <li class="nav-item my-2 my-lg-0">
                <a class="btn btn-outline-primary me-lg-2 w-100" href="{{ url_for('login') }}">
                  <i class="bi bi-box-arrow-in-right me-1"></i> Giriş
                </a>
              </li>
              <li class="nav-item my-2 my-lg-0">
                <a class="btn btn-primary w-100" href="{{ url_for('register') }}">
                  <i class="bi bi-person-plus me-1"></i> Kayıt
                </a>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <!-- Main -->
    <main class="container app-container py-4">
      <!-- Hero / page header -->
      {% block page_header %}{% endblock %}

      <!-- Flash messages as toasts -->
      <div class="toast-container">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for cat, msg in messages %}
              <div class="toast align-items-center text-bg-{{ 'success' if cat=='success' else ('warning' if cat=='warning' else ('danger' if cat=='danger' else 'info')) }} border-0 mb-2 glass" role="alert" aria-live="assertive" aria-atomic="true">
                <div class="d-flex">
                  <div class="toast-body">{{ msg }}</div>
                  <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Kapat"></button>
                </div>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </div>

      <!-- Content -->
      <div class="card glass rounded-3xl p-3 p-md-4">
        {% block content %}{% endblock %}
      </div>
    </main>

    <!-- Footer -->
    <footer class="container app-container pb-4">
      <div class="d-flex justify-content-between align-items-center small text-secondary glass rounded-3xl px-3 py-2">
        <span>&copy; {{ 2025 }} App</span>
        <span class="d-none d-sm-inline">Bootstrap 5 • Glass UI</span>
      </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Flash toasts auto-show
      const toastElList = [].slice.call(document.querySelectorAll('.toast'));
      toastElList.forEach(el => new bootstrap.Toast(el, { delay: 3500 }).show());
    </script>

    {% block scripts %}{% endblock %}
  </body>
</html>
